-- Generated by Oracle SQL Developer Data Modeler 19.4.0.350.1424
--   at:        2021-11-03 20:04:08 BRT
--   site:      Oracle Database 11g
--   type:      Oracle Database 11g



CREATE TABLE tci_atendimento (
    id              INTEGER NOT NULL,
    segunda         VARCHAR2(35),
    terca           VARCHAR2(35),
    quarta          VARCHAR2(35),
    quinta          VARCHAR2(35),
    sexta           VARCHAR2(35),
    sabado          VARCHAR2(35),
    domingo         VARCHAR2(35),
    feriado         VARCHAR2(35),
    tci_empresa_id  INTEGER NOT NULL
);

CREATE UNIQUE INDEX tci_atendimento__idx ON
    tci_atendimento (
        tci_empresa_id
    ASC );

ALTER TABLE tci_atendimento ADD CONSTRAINT tci_atendimento_pk PRIMARY KEY ( id,
                                                                            tci_empresa_id );

CREATE TABLE tci_cardapio (
    id              INTEGER NOT NULL,
    titulo          VARCHAR2(50) NOT NULL,
    destaque        CHAR(1) NOT NULL,
    criadoem        DATE NOT NULL,
    tci_empresa_id  INTEGER NOT NULL
);

ALTER TABLE tci_cardapio ADD CONSTRAINT tci_cardapio_pk PRIMARY KEY ( id );

CREATE TABLE tci_categoria (
    id    INTEGER NOT NULL,
    nome  VARCHAR2(50)
);

ALTER TABLE tci_categoria ADD CONSTRAINT tci_categoria_pk PRIMARY KEY ( id );

CREATE TABLE tci_empresa (
    id                  INTEGER NOT NULL,
    nome                VARCHAR2(255) NOT NULL,
    descricao           VARCHAR2(1000) NOT NULL,
    criadoem            DATE NOT NULL,
    pedidomin           NUMBER(6, 2) NOT NULL,
    logo                BLOB,
    info                VARCHAR2(1000),
    tci_plano_id        INTEGER NOT NULL,
    cnpj                VARCHAR2(18) NOT NULL,
    razaosocial         VARCHAR2(250) NOT NULL,
    telefone            VARCHAR2(9) NOT NULL,
    possuientrega       CHAR(1) NOT NULL,
    tci_responsavel_id  INTEGER NOT NULL
);

ALTER TABLE tci_empresa ADD CONSTRAINT tci_empresa_pk PRIMARY KEY ( id );

CREATE TABLE tci_empresacat (
    tci_empresa_id    INTEGER NOT NULL,
    tci_categoria_id  INTEGER NOT NULL,
    nome              VARCHAR2(50)
);

ALTER TABLE tci_empresacat ADD CONSTRAINT tci_empresacat_pk PRIMARY KEY ( tci_empresa_id,
                                                                          tci_categoria_id );

CREATE TABLE tci_endereco (
    id              INTEGER NOT NULL,
    logradouro      VARCHAR2(255) NOT NULL,
    numero          INTEGER NOT NULL,
    cidade          VARCHAR2(50) NOT NULL,
    uf              CHAR(2) NOT NULL,
    cep             VARCHAR2(10) NOT NULL,
    pais            VARCHAR2(255),
    tci_empresa_id  INTEGER NOT NULL
);

CREATE UNIQUE INDEX tci_endereco__idx ON
    tci_endereco (
        tci_empresa_id
    ASC );

ALTER TABLE tci_endereco ADD CONSTRAINT tci_endereco_pk PRIMARY KEY ( id,
                                                                      tci_empresa_id );

CREATE TABLE tci_item (
    id               INTEGER NOT NULL,
    nome             VARCHAR2(50) NOT NULL,
    descricao        VARCHAR2(1000) NOT NULL,
    preco            NUMBER(6, 2) NOT NULL,
    criadoem         DATE NOT NULL,
    foto             BLOB,
    tci_cardapio_id  INTEGER NOT NULL
);

ALTER TABLE tci_item ADD CONSTRAINT tci_item_pk PRIMARY KEY ( id );

CREATE TABLE tci_plano (
    id     INTEGER NOT NULL,
    nome   VARCHAR2(50) NOT NULL,
    preco  NUMBER(6, 2) NOT NULL
);

ALTER TABLE tci_plano ADD CONSTRAINT tci_plano_pk PRIMARY KEY ( id );

CREATE TABLE tci_responsavel (
    id         INTEGER NOT NULL,
    email      VARCHAR2(100) NOT NULL,
    nome       VARCHAR2(100) NOT NULL,
    sobrenome  VARCHAR2(100) NOT NULL,
    cpf        VARCHAR2(15) NOT NULL,
    rg         VARCHAR2(15) NOT NULL,
    uf         CHAR(2) NOT NULL,
    termos     CHAR(1) NOT NULL
);

ALTER TABLE tci_responsavel ADD CONSTRAINT tci_responsavel_pk PRIMARY KEY ( id );

ALTER TABLE tci_atendimento
    ADD CONSTRAINT tci_atendimento_tci_empresa_fk FOREIGN KEY ( tci_empresa_id )
        REFERENCES tci_empresa ( id )
            ON DELETE CASCADE;

ALTER TABLE tci_cardapio
    ADD CONSTRAINT tci_cardapio_tci_empresa_fk FOREIGN KEY ( tci_empresa_id )
        REFERENCES tci_empresa ( id )
            ON DELETE CASCADE;

ALTER TABLE tci_empresa
    ADD CONSTRAINT tci_empresa_tci_plano_fk FOREIGN KEY ( tci_plano_id )
        REFERENCES tci_plano ( id );

ALTER TABLE tci_empresa
    ADD CONSTRAINT tci_empresa_tci_responsavel_fk FOREIGN KEY ( tci_responsavel_id )
        REFERENCES tci_responsavel ( id )
            ON DELETE CASCADE;

--  ERROR: FK name length exceeds maximum allowed length(30) 
ALTER TABLE tci_empresacat
    ADD CONSTRAINT tci_empresacat_tci_categoria_fk FOREIGN KEY ( tci_categoria_id )
        REFERENCES tci_categoria ( id );

ALTER TABLE tci_empresacat
    ADD CONSTRAINT tci_empresacat_tci_empresa_fk FOREIGN KEY ( tci_empresa_id )
        REFERENCES tci_empresa ( id );

ALTER TABLE tci_endereco
    ADD CONSTRAINT tci_endereco_tci_empresa_fk FOREIGN KEY ( tci_empresa_id )
        REFERENCES tci_empresa ( id )
            ON DELETE CASCADE;

ALTER TABLE tci_item
    ADD CONSTRAINT tci_item_tci_cardapio_fk FOREIGN KEY ( tci_cardapio_id )
        REFERENCES tci_cardapio ( id )
            ON DELETE CASCADE;



-- Oracle SQL Developer Data Modeler Summary Report: 
-- 
-- CREATE TABLE                             9
-- CREATE INDEX                             2
-- ALTER TABLE                             17
-- CREATE VIEW                              0
-- ALTER VIEW                               0
-- CREATE PACKAGE                           0
-- CREATE PACKAGE BODY                      0
-- CREATE PROCEDURE                         0
-- CREATE FUNCTION                          0
-- CREATE TRIGGER                           0
-- ALTER TRIGGER                            0
-- CREATE COLLECTION TYPE                   0
-- CREATE STRUCTURED TYPE                   0
-- CREATE STRUCTURED TYPE BODY              0
-- CREATE CLUSTER                           0
-- CREATE CONTEXT                           0
-- CREATE DATABASE                          0
-- CREATE DIMENSION                         0
-- CREATE DIRECTORY                         0
-- CREATE DISK GROUP                        0
-- CREATE ROLE                              0
-- CREATE ROLLBACK SEGMENT                  0
-- CREATE SEQUENCE                          0
-- CREATE MATERIALIZED VIEW                 0
-- CREATE MATERIALIZED VIEW LOG             0
-- CREATE SYNONYM                           0
-- CREATE TABLESPACE                        0
-- CREATE USER                              0
-- 
-- DROP TABLESPACE                          0
-- DROP DATABASE                            0
-- 
-- REDACTION POLICY                         0
-- 
-- ORDS DROP SCHEMA                         0
-- ORDS ENABLE SCHEMA                       0
-- ORDS ENABLE OBJECT                       0
-- 
-- ERRORS                                   1
-- WARNINGS                                 0
